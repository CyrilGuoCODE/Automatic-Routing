<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Automatic-Routing 示例</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      line-height: 1.6;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h1 {
      color: #3498db;
    }
    pre {
      background-color: #f1f1f1;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
    }
    .note {
      background-color: #fff8dc;
      padding: 10px;
      border-left: 4px solid #ffd700;
      margin: 15px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Automatic-Routing 集成示例</h1>
    
    <p>本页面展示了如何在您的网站中集成 Automatic-Routing 智能域名路由系统。</p>
    
    <div class="note">
      <strong>注意：</strong> 此页面仅用于演示目的。在实际使用时，您需要将API地址替换为您自己的服务器地址。
    </div>
    
    <h2>集成步骤</h2>
    
    <h3>1. 引入脚本</h3>
    
    <pre>&lt;script src="https://cdn.example.com/automatic-routing/redirect.js"&gt;&lt;/script&gt;</pre>
    
    <h3>2. 初始化配置</h3>
    
    <pre>&lt;script&gt;
  document.addEventListener('DOMContentLoaded', function() {
    // 初始化 Automatic-Routing
    AutomaticRouting.init({
      domains: ['example1.com', 'example2.com', 'example3.com'],
      apiUrl: 'https://your-api-server.com',
      priorityFactor: 'combined',  // 'latency', 'dns', 或 'combined'
      considerGeoLocation: true,
      cookieExpiration: 7,  // Cookie有效期（天）
      forceRedirect: false
    });
  });
&lt;/script&gt;</pre>
    
    <h3>3. 高级配置选项</h3>
    
    <ul>
      <li><strong>domains</strong>: 您的所有域名列表</li>
      <li><strong>apiUrl</strong>: API服务器地址</li>
      <li><strong>priorityFactor</strong>: 选择最佳域名的优先因素
        <ul>
          <li><code>latency</code>: 优先考虑网络延迟</li>
          <li><code>dns</code>: 优先考虑DNS解析时间</li>
          <li><code>combined</code>: 综合考虑所有因素（默认）</li>
        </ul>
      </li>
      <li><strong>considerGeoLocation</strong>: 是否考虑用户地理位置</li>
      <li><strong>cookieExpiration</strong>: Cookie有效期（天）</li>
      <li><strong>forceRedirect</strong>: 是否强制重定向（即使已有Cookie）</li>
    </ul>
    
    <div class="note">
      <p>为了最佳性能，建议将脚本放置在HTML文档的头部，并确保在页面加载前完成初始化。</p>
    </div>
    
    <h2>工作原理</h2>
    
    <p>当用户访问您的网站时，脚本会执行以下操作：</p>
    
    <ol>
      <li>检测用户的地理位置和网络状况</li>
      <li>测量各个域名的访问延迟和DNS解析时间</li>
      <li>根据配置的优先因素，选择最佳域名</li>
      <li>如果当前域名不是最佳选择，自动重定向用户</li>
      <li>将选择结果保存在Cookie中，避免重复测量</li>
    </ol>
    
    <h2>实时测试</h2>
    
    <p>本页面已集成了Automatic-Routing。如果您通过多个不同的域名访问，系统会自动将您重定向到最佳的访问路径。</p>
  </div>
  
  <!-- 引入 Automatic-Routing 脚本 -->
  <script src="redirect.js"></script>
  
  <!-- 初始化配置（仅用于演示） -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 示例配置
      AutomaticRouting.init({
        domains: ['example1.com', 'example2.com', 'example3.com'],
        apiUrl: 'https://automatic-routing-api.example.com',
        priorityFactor: 'combined',
        considerGeoLocation: true
      });
    });
  </script>
</body>
</html> 